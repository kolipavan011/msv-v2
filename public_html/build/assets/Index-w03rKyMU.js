import{O as a,o as i,c as l,b as e,d as h,v as y,Z as _,i as M,m as k,n as w,r as C,a as S,t as m,w as c,e as b,p as F,F as V,h as x,q as B}from"./app-ISzOvFh-.js";import{u}from"./assignIn-BzpSuDoB.js";import{L as H}from"./AuthenticatedLayout-MJyUvD7w.js";import{c as v}from"./createFolderModal-iHeTXeiq.js";import{_ as p}from"./_plugin-vue_export-helper-x3n3nnut.js";const I={props:{video:Object},emits:["ondelete","onupdate"],methods:{updateVideo(){a.put(route("video.update",{id:this.video.id}),{title:this.video.title}),this.$vbsModal.close()}}},N={class:"modal-content"},D={class:"modal-body"},E=["src","poster"],L={class:"modal-footer"};function j(t,o,d,g,f,n){return i(),l("div",N,[e("div",D,[e("video",{width:"400",height:"300",src:d.video.path,class:"w-100 bg-secondary",controls:"",poster:d.video.thumbnail,preload:"none"},null,8,E),h(e("textarea",{class:"form-control mt-3 border-0 bg-secondary",name:"video-name",id:"video-name",rows:"3","onUpdate:modelValue":o[0]||(o[0]=r=>d.video.title=r)},null,512),[[y,d.video.title]])]),e("div",L,[e("button",{type:"button",class:"btn btn-secondary btn-sm","data-bs-dismiss":"modal",onClick:o[1]||(o[1]=r=>t.$vbsModal.close())}," Close "),e("button",{type:"button",class:"btn btn-danger btn-sm","data-bs-dismiss":"modal",onClick:o[2]||(o[2]=r=>t.$emit("ondelete",d.video))}," Delete "),e("button",{type:"button",class:"btn btn-primary btn-sm",onClick:o[3]||(o[3]=(...r)=>n.updateVideo&&n.updateVideo(...r))}," Upadate ")])])}const O=p(I,[["render",j]]),P={layout:H,props:{items:Array,folder:Number,name:String},components:{Head:_,Link:M},computed:{...k(u,["list","canSelect"])},methods:{...w(u,["toggle","removeItem","resetItem","toggleSelect"]),openCreateModal(){this.$vbsModal.open({content:v,contentProps:{name:""},contentEmits:{oncreate:this.createFolder}})},openRenameModal(){this.$vbsModal.open({content:v,contentProps:{name:this.name},contentEmits:{oncreate:this.renameFolder}})},openViewModal(t){this.$vbsModal.open({content:O,contentProps:{video:t},contentEmits:{ondelete:this.deleteMedia},staticBackdrop:!0})},openMedia(t){if(t.isfolder)return a.get(route("media",{id:t.id}));if(this.canSelect){this.toggle(t.id),t.isSelected=this.list.includes(t.id);return}this.openViewModal(t)},createFolder(t){this.$vbsModal.close(),t.length!=0&&a.post(route("folder.create"),{title:t,folder_id:this.folder})},renameFolder(t){this.$vbsModal.close(),t.length!=0&&a.put(route("folder.update",{id:this.folder}),{title:t})},deleteMedia(t){this.$vbsModal.close(),a.delete(route("video.destroy",{id:t.id}))},deleteFolder(){a.delete(route("folder.destroy",{id:this.folder}),{onBefore:()=>confirm("Do you want to delete folde")})},moveMedia(){this.list.length!=0&&a.post(route("video.move",{id:this.folder,items:this.list}),{},{onSuccess:()=>{this.resetItem(),this.toggleSelect()}})},goback(){window.history.back()},resetSelection(){this.toggleSelect(),this.resetItem()}}},R={class:"inertia-page"},A={class:"mb-4"},U={class:"d-flex flex-column flex-sm-row justify-content-between gap-2"},q={class:"m-0 d-inline"},z={key:0},G={key:1},T={class:"container px-0"},Z={class:"row row-cols-2 row-cols-sm-2 row-cols-md-2 row-cols-lg-3 g-4"},$={class:"col"},J=e("div",{class:"card h-100 bg-transparent border-0"},[e("img",{width:"320",height:"180",src:"/img/prev-folder.jpg",class:"card-img-top bg-secondary rounded"}),e("div",{class:"card-body"},[e("p",{class:"card-title text-truncate text-center"}," Go Back ")])],-1),K=[J],Q={class:"col"},W=["onClick"],X={class:"card h-100 bg-transparent border-0"},Y=["src"],ee={class:"card-body"},te={class:"card-title text-truncate text-center"};function oe(t,o,d,g,f,n){const r=C("Head");return i(),l("div",R,[S(r,{title:"Media"}),e("header",A,[e("div",U,[e("div",null,[e("h3",q,m(d.name),1),d.name!=="Home"?(i(),l("a",{key:0,type:"button",class:"ms-2",onClick:o[0]||(o[0]=c((...s)=>n.openRenameModal&&n.openRenameModal(...s),["prevent"]))}," (edit) ")):b("",!0),d.name!=="Home"?(i(),l("a",{key:1,type:"button",class:"ms-2 text-danger",onClick:o[1]||(o[1]=c((...s)=>n.deleteFolder&&n.deleteFolder(...s),["prevent"]))}," (delete) ")):b("",!0)]),t.canSelect?(i(),l("div",G,[e("button",{type:"button",class:"btn btn-primary me-2 btn-sm",onClick:o[4]||(o[4]=(...s)=>n.moveMedia&&n.moveMedia(...s))}," Move("+m(t.list.length)+") ",1),e("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:o[5]||(o[5]=(...s)=>n.resetSelection&&n.resetSelection(...s))}," Cancel ")])):(i(),l("div",z,[e("button",{type:"button",class:"btn btn-primary me-2 btn-sm",onClick:o[2]||(o[2]=(...s)=>t.toggleSelect&&t.toggleSelect(...s))}," Select "),e("button",{type:"button",class:"btn btn-warning btn-sm",onClick:o[3]||(o[3]=(...s)=>n.openCreateModal&&n.openCreateModal(...s))}," New Folder ")]))])]),e("div",T,[e("div",Z,[h(e("div",$,[e("a",{href:"#",onClick:o[6]||(o[6]=c((...s)=>n.goback&&n.goback(...s),["prevent"]))},K)],512),[[F,d.folder!=1]]),(i(!0),l(V,null,x(d.items,s=>(i(),l("div",Q,[e("a",{href:"media",onClick:c(se=>n.openMedia(s),["prevent"])},[e("div",X,[e("img",{width:"320",height:"180",src:s.thumbnail,class:B(["card-img-top bg-secondary border-primary border-4 rounded",{border:t.list.includes(s.id)}])},null,10,Y),e("div",ee,[e("p",te,m(s.title),1)])])],8,W)]))),256))])])])}const ae=p(P,[["render",oe]]);export{ae as default};
